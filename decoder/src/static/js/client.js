'use strict';

var socket = io.connect('http://localhost:3000');

function componentToHex(c) {
  var hex = c.toString(16);
  return hex.length == 1 ? "0" + hex : hex;
}

function rgbToHex(r, g, b) {
  return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
}

function writePixels(colors){
  console.log(colors);
  $('.pixels').each(function(index){
    console.log('index: ' + index);
    //console.log('writing color: ' + colors[index]);
    $(this).css('background-color', colors[index]);
  });
}

socket.on('board', function (data) {
  //console.info(data)
  $('#status').text(data.status)
});

socket.on('measure', function (data) {
  //console.log('measure data',data)
  _.forEach(data, function (item, key){
    $('#'+key).css('background-color', item.color)
  })
});

socket.on('status', function (data){
  console.info('status data', data);
});

//generates random numbers in a range
function randomInt (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}


//generate random colors and writes them to the template
function fakeImg(pixels){
  var hpixels = []
  _.forEach(pixels, function(pixel, index){
    //console.log(pixel)
    var r = pixel
    var g = pixel
    var b = pixel
    var color = rgbToHex(r, g, b)
    //console.log(color)
    hpixels.push(color)
  });
  //console.log(hpixels)
  writePixels(hpixels);
}

/*

$(function () {
  var data = {'board':'portrait'};

  $(document).ready(function(){

    $('.loading').spin('large', '#000000')
  })

  if(data.board === 'calibrating'){
    window.location = 'http://localhost:3000'
  }

  if(data.board === 'scanning'){
   window.location = 'http://localhost:3000/scanning'
  }

  if(data.board === 'portrait'){
    window.location = 'http://localhost:3000/portrait'
    //fakeImg()

  }
})
*/

/*
$(document).ready(function(){
  
  $('.loading').spin('large', '#000000')
  $('.bxslider').bxSlider({
    auto: true,
    controls: false,
    autoContols: false,
  });
})
*/



var cmart = [
204,
206,
202,
205,
209,
198,
213,
204,
206,
161,
167,
171,
161,
164,
99,
29,
207,
206,
206,
205,
203,
205,
207,
199,
166,
203,
164,
160,
207,
174,
17,
29,
205,
204,
208,
208,
196,
210,
196,
212,
204,
208,
203,
172,
167,
163,
32,
30,
201,
207,
202,
207,
211,
168,
206,
167,
201,
209,
207,
160,
155,
34,
28,
28,
212,
203,
209,
25,
98,
125,
136,
123,
131,
130,
93,
31,
171,
30,
22,
28,
206,
199,
28,
136,
124,
102,
22,
33,
99,
124,
133,
130,
96,
28,
131,
131,
198,
38,
29,
95,
92,
98,
30,
27,
94,
97,
96,
31,
20,
101,
25,
132,
208,
26,
93,
137,
127,
132,
91,
101,
95,
32,
25,
28,
33,
94,
33,
92,
205,
31,
126,
166,
171,
160,
169,
204,
132,
92,
133,
29,
29,
30,
96,
32,
203,
34,
163,
204,
200,
169,
96,
98,
197,
214,
92,
34,
162,
204,
165,
204,
206,
201,
105,
206,
206,
206,
27,
205,
207,
205,
207,
166,
91,
136,
204,
207,
204,
206,
91,
28,
203,
202,
170,
202,
210,
197,
207,
206,
32,
28,
27,
93,
207,
208,
208,
204,
29,
34,
87,
168,
202,
203,
209,
204,
167,
21,
169,
99,
202,
196,
214,
200,
210,
204,
205,
205,
205,
210,
205,
197,
168,
132,
26,
161,
206,
206,
202,
200,
210,
202,
207,
204,
210,
202,
203,
208,
166,
165,
98,
132,
208,
201,
207,
209,
201,
205,
204,
206,
200,
209,
206,
205,
201,
163,
99,
95 ]

var zea = [
29,
29,
29,
29,
29,
29,
29,
29,
96,
96,
96,
96,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
96,
96,
29,
29,
29,
96,
96,
96,
96,
29,
29,
29,
29,
29,
29,
96,
96,
96,
143,
96,
29,
96,
143,
175,
96,
96,
29,
29,
29,
29,
96,
96,
96,
143,
143,
96,
96,
96,
175,
175,
143,
143,
96,
96,
96,
96,
143,
96,
143,
175,
96,
96,
96,
143,
143,
143,
143,
96,
29,
96,
96,
96,
175,
175,
175,
175,
175,
96,
96,
96,
96,
96,
96,
29,
96,
96,
143,
143,
224,
224,
175,
224,
224,
175,
96,
96,
96,
143,
96,
29,
96,
143,
175,
175,
224,
224,
224,
224,
224,
224,
224,
224,
224,
224,
224,
96,
143,
175,
175,
175,
224,
224,
224,
224,
224,
143,
175,
224,
175,
224,
175,
96,
143,
175,
224,
224,
224,
224,
224,
224,
175,
96,
143,
224,
224,
224,
224,
175,
96,
175,
224,
224,
224,
224,
224,
224,
143,
96,
143,
224,
224,
224,
224,
224,
96,
175,
175,
143,
224,
224,
224,
224,
175,
143,
175,
224,
224,
224,
224,
224,
224,
175,
96,
96,
143,
175,
175,
175,
96,
143,
175,
224,
224,
224,
175,
143,
96,
29,
29,
29,
29,
29,
29,
29,
29,
29,
96,
175,
224,
224,
96,
29,
29,
29,
29,
29,
29,
29,
29,
29,
29,
96,
96,
143,
96,
96,
96,
29,
29,
29,
29,
29]


$(document).ready(function(){
  fakeImg(zea);
})

